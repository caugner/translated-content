---
title: SpiderMonkey Build Documentation
slug: SpiderMonkey/Build_Documentation
tags:
  - Build Dokumentation
  - Guide
  - Linux Build
  - SpiderMonkey
  - Windows Build
translation_of: Mozilla/Projects/SpiderMonkey/Build_Documentation
---
<div>{{SpiderMonkeySidebar("General")}}</div>

<h2 id="SpiderMonkey_erstellen">SpiderMonkey erstellen</h2>

<p>Befolgen Sie diese Schritte um den aktuellsten SpiderMonkey Build zu erstellen.</p>

<p>Bevor Sie jedoch beginnen, stellen Sie sicher, dass sich die richtigen Build Werkzeuge auf Ihrem Computer befinden: <a href="/En/Developer_Guide/Build_Instructions/Linux_Prerequisites" title="en/Linux_Build_Prerequisites">Linux</a>, <a href="/En/Developer_Guide/Build_Instructions/Windows_Prerequisites" title="en/Windows_Build_Prerequisites">Windows</a>, <a href="/En/Developer_Guide/Build_Instructions/Mac_OS_X_Prerequisites" title="en/Mac_OS_X_Build_Prerequisites">Mac</a>, <a href="/En/Developer_Guide/Build_Instructions" title="en/Build_Documentation">others</a>. Sollten Sie eine ältere Version als 28 erstellen wollen, benötigen Sie zusätzlich <a href="/en/NSPR" title="en/NSPR">NSPR</a>.</p>

<p style="margin: 0px 0px 1.7em; padding: 0px;">Selbstverständlich benötigen Sie auch den <a class="internal" href="/En/SpiderMonkey/Getting_SpiderMonkey_source_code#Getting_the_latest_SpiderMonkey_source_code" title="En/SpiderMonkey/Getting SpiderMonkey source code#Getting the latest SpiderMonkey source code">SpiderMonkey Quellcode</a>.</p>

<h3 id="Non-developer_(optimierter)_Build">Non-developer (optimierter) Build</h3>

<p>Befolgen Sie diese Schritte wenn Sie SpiderMonkey einfach nur installieren oder es als Bibliothek nutzen wollen. (Wenn Sie SpiderMonkey an sich verbessern wollen, sollten Sie zusätzlich einen Developer/Debug-Build wie unten beschrieben erstellen.)</p>

<pre class="eval">cd js/src
autoconf-2.13

# This name should end with "_OPT.OBJ" to make the version control system ignore it.
mkdir build_OPT.OBJ
cd build_OPT.OBJ
../configure
# Use "mozmake" on Windows
make
</pre>

<p>Beachten Sie, dass autoconf version 2.13 benötigt wird. Keine ältere Version wird funktionieren. Das <a href="/En/Developer_Guide/Build_Instructions/Windows_Prerequisites#mozillabuild" title="https://developer.mozilla.org/en/Windows_Build_Prerequisites#mozillabuild">MozillaBuild</a> Paket für Windows beeinhaltet autoconf 2.13.</p>

<div class="note">
<p><strong>Hinweis</strong>: Sollten Sie einen Mac nutzen und eine ähnliche Fehlermeldung wie folgendes erhalten:</p>

<p>"<code>checking whether the C compiler (gcc-4.2  ) works... no<br>
 configure: error: installation or configuration problem: C compiler cannot create executables.</code>"</p>

<p>Dann können Sie versuchen es so zu konfigurieren :</p>

<pre><code>CC=clang CXX=clang++  ../configure</code></pre>
</div>

<p>Dies erstellt eine ausfühbare Datei mit Namen <code>js</code> im Verzeichnis <code>build-release/dist/bin</code>. Sie können es mit <code>dist/bin/js --help</code> testen,  welches eine Hilfeseite anzeigt. An diesem Punkt sind Sie bereit <a href="/En/SpiderMonkey/Introduction_to_the_JavaScript_shell" title="en/Introduction_to_the_JavaScript_shell">die Shell auszuführen und zu testen</a>.</p>

<p>Auf Mac, Linux, oder UNIX können Sie SpiderMonkey auf Ihrem System mit dem zusätzlichen Befehl <code>make install</code> installieren. Dies installiert die geteilte Bibliothek nach <code>/usr/local/lib</code>, die C-Header-Dateien nach <code>/usr/local/include</code>, und die ausführbare <code>js</code>  nach <code>/usr/local/bin</code>.</p>

<h3 id="Developer_(debug)_Build">Developer (debug) Build</h3>

<p>Um SpiderMonkey zu debuggen und zu verbessern ist es das Beste beide, einen Debug-Build  (für alltägliches debugging) und einen optimierten Build (zum Testen der Performance), in separaten Build Verzeichnissen zu haben. Daher sollten Sie zusätzlich zu den oben genannten Schritten auch einen Debug-Build mit den folgenden Schritten erstellen:</p>

<pre class="eval">cd js/src
autoconf-2.13

# This name should end with "_DBG.OBJ" to make the version control system ignore it.
mkdir build_DBG.OBJ
cd build_DBG.OBJ
../configure --enable-debug --disable-optimize
# Use "mozmake" on Windows
make
</pre>

<p>Sie können auch Debug-Builds von SpiderMonkey mit der Option <code>JS_GC_ZEAL</code>  erstellen, die SpiderMonkey eine neue integrierte Funktion hinzufügt, mit der Sie eine eifrige Garbage Collection konfigurieren können. Dies ist nützlich um Speicherlecks und andere speicherbezogene Probleme zu beheben. Siehe <a class="internal" href="/en/SpiderMonkey/JSAPI_Reference/JS_SetGCZeal" title="En/SpiderMonkey/JSAPI Reference/JS SetGCZeal"><code>JS_SetGCZeal()</code></a> für weitere Details.</p>

<p>Für eine Liste anderer verfügbarer Build-Optionen geben Sie Folgendes ein (vorausgesetzt, das aktuelle Arbeitsverzeichnis ist eines der oben erstellten Build-Verzeichnisse):</p>

<pre class="eval">../configure --help
</pre>

<h3 id="Building" name="Building">Windows Builds</h3>

<div class="note">
<p>Seit Version 28, <strong>sind threadsafe Builds Standard</strong> und sollten auf allen POSIX-Plattformen sofort einsatzbereit sein. Daher sollten die folgenden Anweisungen nur relevant sein, wenn Sie unter Windows arbeiten oder eine ältere Version von SpiderMonkey kompilieren.</p>
</div>

<p>Die MozillaBuild-Batch-Datei, die Sie zum Öffnen Ihrer Shell verwendet haben (z. B. <code>start-shell-msvc2013.bat</code> oder <code>start-shell-msvc2013-x64.bat</code>), bestimmt, ob die Compiler-Toolchain auf 32-Bit- oder 64-Bit-Builds abzielt. Um einen 64-Bit-Build zu erstellen beachten Sie, dass Sie mit <code>--target=x86_64-pc-mingw32 --host=x86_64-pc-mingw32</code> konfigurieren müssen. </p>

<p>Da die POSIX NSPR-Emulation für Windows nicht verfügbar ist, muss eine funktionierende Version von NSPR für Ihren Build verfügbar sein. <strong>Die einfachste Option ist die Konfiguration mit <code>--enable-nspr-build</code>.</strong> Diese Konfigurationsoption erstellt die In-Tree-Version von NSPR, die Sie wahrscheinlich verwenden möchten. Da SpiderMonkey neuere NSPR-Symbole verwendet, funktioniert der mit Ihrem Betriebssystem ausgelieferte NSPR wahrscheinlich nicht.</p>

<p>Wenn <code>--enable-nspr-build</code> nicht funktioniert, teilen Sie <code>configure</code> explizit mit, wo es NSPR findet, indem Sie die Konfigurationsoptionen <code>-with-nspr-cflags</code> und <code>--with-nspr-libs</code> verwenden. Angenommen, Ihr lokaler NSPR wurde in <code>C:/mozilla-build/msys/local</code> installiert:</p>

<pre><span style="line-height: normal;"><code><span style="line-height: normal;"><code><code>./configure<code> --with-nspr-cflags="-IC:/mozilla-build/msys/local/include" \
            --with-nspr-libs="<span style="line-height: normal;"><code><span style="line-height: normal;"><code><code><code>C:/mozilla-build/msys/local</code></code></code></span></code></span>/lib/libnspr4.a \
                              <span style="line-height: normal;"><code><span style="line-height: normal;"><code><code><code>C:/mozilla-build/msys/local</code></code></code></span></code></span>/lib/libplds4.a \
                              <span style="line-height: normal;"><code><span style="line-height: normal;"><code><code><code>C:/mozilla-build/msys/local</code></code></code></span></code></span>/lib/libplc4.a"</code>
</code></code></span></code></span></pre>

<p>Sollten Sie beim Laden von Symbolen oder der dynamischen Bibliothek Fehler erhalten, können Sie erzwingen den korrekten NSPR mit:</p>

<pre><span style="line-height: normal;">PATH="$PATH;<span style="line-height: normal;">C:/mozilla-build/msys/local/lib/</span><span style="line-height: normal;">" ./js</span></span></pre>

<p><span style="line-height: normal;"><span style="line-height: normal;">zu laden.</span></span></p>

<h2 id="Angeben_der_Installationsverzeichnisse">Angeben der Installationsverzeichnisse</h2>

<p><code>make install</code> legt Dateien standardmäßig in den folgenden Verzeichnissen ab. Sie können dies überschreiben, indem Sie Optionen an das <code>configure</code>-Skript übergeben:</p>

<table class="standard-table">
 <tbody>
  <tr>
   <th>Was es ist</th>
   <th>Wo es abgelegt wird</th>
   <th><code>configure</code> Option</th>
  </tr>
  <tr>
   <td>ausführbare Dateien, Shell-Skripte</td>
   <td><code>/usr/local/bin</code></td>
   <td><code>--bindir</code></td>
  </tr>
  <tr>
   <td>Bibliotheken, Daten</td>
   <td><code>/usr/local/lib</code></td>
   <td><code>--libdir</code></td>
  </tr>
  <tr>
   <td>architekturunabhängige Daten</td>
   <td><code>/usr/local/share</code></td>
   <td><code>--sharedir</code></td>
  </tr>
  <tr>
   <td>C-Header-Dateien</td>
   <td><code>/usr/local/include</code></td>
   <td><code>--includedir</code></td>
  </tr>
 </tbody>
</table>

<p>Der Einfachhalt halber können Sie dem <code>configure</code> Script (Konfigurationsskript) eine Option der Form <code>--prefix=&lt;PREFIXDIR&gt;</code> übergeben, die <code>&lt;PREFIXDIR&gt;</code> für <code>/usr/local</code> in allen obigen Einstellungen in einem Schritt ersetzt. Dies ist normalerweise die am wenigsten problematische Sache, da es die typische Anordnung von <code>lib</code>, <code>bin</code> und dem Rest beibehält. </p>

<div class="note"><strong>Hinweis:</strong> Alle Verzeichnisse, die Sie zur <code>configure</code> übergeben, werden im generierten makefile aufgezeichnet, sodass Sie sie erst erneut angeben müssen, wenn Sie <code>configure</code> erneut ausführen.</div>

<h2 id="SpiderMonkey_als_statische_Bibliothek_erstellen">SpiderMonkey als statische Bibliothek erstellen</h2>

<p>Standardmäßig wird SpiderMonkey als gemeinsam genutzte Bibliothek erstellt. Sie können SpiderMonkey jedoch als statische Bibliothek erstellen, indem Sie beim Ausführen von <code>configure</code> das Flag <code>--disable-shared-js</code> angeben. </p>

<h2 id="Angeben_der_Compiler_und_Compiler_Flags">Angeben der Compiler und Compiler Flags</h2>

<p>Wenn Sie einen anderen Compiler verwenden möchten als den, den das <code>configure</code> -Skript standardmäßig für Sie auswählt, können Sie die CXX-Variable in der Umgebung festlegen, wenn Sie <code>configure</code> ausführen. Dadurch werden die Werte gespeichert, die Sie im generierten Makefile angegeben haben. Wenn Sie diese Makefile einmal festgelegt haben, müssen Sie dies erst wieder tun, wenn Sie <code>configure</code> rneut ausführen.</p>

<p>Wenn Sie bestimmte Flags an den Compiler übergeben möchten, können Sie die <code>CXXFLAGS</code> -Umgebungsvariable beim Ausführen von <code>configure</code> festlegen. Wenn Sie beispielsweise die GNU-Toolchain verwenden, wird im Folgenden das Flag <code>-g3</code> an den Compiler übergeben, wodurch Debug-Informationen zu Makros ausgegeben werden. Dann können Sie diese Makros in <code>gdb</code> -Befehlen verwenden:</p>

<pre class="eval">$ <strong>CXXFLAGS=-g3 $SRC/configure</strong>
<em>...</em>
checking whether the C++ compiler (c++ -g3 ) works... yes
<em>...</em>
$
</pre>

<p>Um eine 32-Bit Version auf einem 64-Bit Linux System zu erstellen können Sie Folgendes verwenden:</p>

<pre class="eval">PKG_CONFIG_LIBDIR=/usr/lib/pkgconfig CC="gcc -m32" CXX="g++ -m32" AR=ar $SRC/configure --target=i686-pc-linux
</pre>

<p>Um eine 64-Bit Version auf einem 32-Bit Mac System (bspw. Mac OS X 10.5) zu erstellen können Sie Folgendes verwenden:</p>

<pre class="eval">AR=ar CC="gcc -m64" CXX="g++ -m64" ../configure --target=x86_64-apple-darwin10.0.0
</pre>

<p>Um eine 64-Bit Version für Windows zu erstellen können Sie Folgendes verwenden:</p>

<pre class="eval">$SRC/configure --host=x86_64-pc-mingw32 --target=x86_64-pc-mingw32
</pre>

<div class="note"><strong>Hinweis:</strong> Sie müssen Ihre MozillaBuild Shell mit dem korrekten -x64.bat Skript gestartet haben, damit sich die 64-Bit Compiler in Ihrem PATH befinden.</div>

<p>Die Compiler und Flags, die Sie <code>configure</code> (Konfiguration) übergeben, werden in der generierten Makefile aufgezeichnet. Sie müssen diese daher erst wieder angeben, wenn Sie <code>configure</code> erneut ausführen.</p>

<h2 id="Erstellung_Ihrer_Anwendung">Erstellung Ihrer Anwendung</h2>

<p>Während "Wie können Sie eine komplette Anwendung erstellen" für dieses Dokument eindeutig nicht möglich ist, hier ein paar Tipps, die Ihnen dabei helfen werden:</p>

<ul>
 <li>Die SpideMonkey Entwickler ändern häufig und absichtlich die JSAPI ABI. Sie können keine für eine Version / Konfiguration von JSAPI erstellten Header verwenden, um Objektdateien zu erstellen, die mit anderen verknüpft sind.</li>
 <li>Die Unterstüztung für JS_THREADSAFE wurde kürzlich eingestellt und threadsafe Builds sind jetzt standardmäßig aktiviert.</li>
 <li>Das unten beschriebene <code>js-config</code> Skript ist die empfohlene Methode, um korrekte Include-Pfade, erforderliche Bibliotheken usw. zu bestimmen, damit Ihre Einbettung während der Kompilierung verwendet werden kann. Wir empfehlen dringend, das <code>js-config</code> Skript aus dem Makefile Ihrer Einbettung aufzurufen, um Ihre CFLAGS, LDFLAGS usw einzustellen.</li>
 <li>Um SpiderMonkey in einem anderen Verzeichnis als dem Standard zu installieren, müssen Sie die <code>configure</code> <code>--prefix</code> Option, wie oben beschrieben, verwenden. Andernfalls kann der Header in <code>js-config.h</code> oder das Skript <code>js-config</code> beschädigt werden.</li>
 <li>Some features detected by the <code>configure</code> script do not work for cross-compilation.</li>
</ul>

<h3 id="Using_the_js-config_script">Using the js-config script</h3>

<p>In addition to the SpiderMonkey libraries, header files, and shell, the SpiderMonkey build also produces a shell script named <code>js-config</code> which other build systems can use to find out how to compile code using the SpiderMonkey APIs, and how to link with the SpiderMonkey libraries.</p>

<div class="note"><strong>Note:</strong> In SpiderMonkey 1.8.5, the js-config script is not generated properly on many platforms. If the instructions below do not work, you can try this <a href="/en/SpiderMonkey/1.8.5#js-config" title="https://developer.mozilla.org/en/SpiderMonkey/1.8.5#js-config">workaround</a>.</div>

<p>When invoked with the <code>--cflags</code> option, <code>js-config</code> prints the flags that you should pass to the C compiler when compiling files that use the SpiderMonkey API. These flags ensure the compiler will find the SpiderMonkey header files.</p>

<pre class="eval">$ ./js-config --cflags # Example output: -I/usr/local/include/js -I/usr/include/nspr
</pre>

<p>When invoked with the <code>--libs</code> option, <code>js-config</code> prints the flags that you should pass to the C compiler when linking an executable or shared library that uses SpiderMonkey. These flags ensure the compiler will find the SpiderMonkey libraries, along with any libraries that SpiderMonkey itself depends upon (like NSPR).</p>

<pre class="eval">$ ./js-config --libs # Example output: -L/usr/local/lib -lmozjs -L/usr/lib -lplds4 -lplc4 -lnspr4 -lpthread -ldl -ldl -lm  -lm -ldl</pre>

<h2 id="Test" name="Test">Testing SpiderMonkey</h2>

<ul>
 <li>
  <p>Run <code>${BUILDDIR}/dist/bin/js </code><code>Y.js</code> and check if appropriate output is printed. (It should say: <code>5! is 120</code>.)</p>
 </li>
 <li>
  <p>Run the main test suite by running <code>./tests/jstests.py ${BUILDDIR}/dist/bin/js</code></p>
 </li>
 <li>
  <p>Run JIT-specific tests by running: <code>./jit-test/jit_test.py ${BUILDDIR}/dist/bin/js</code></p>
 </li>
</ul>

<h2 id="Building_SpiderMonkey_1.8_or_earlier">Building SpiderMonkey 1.8 or earlier</h2>

<p style="margin-top: 0px; margin-right: 0px; margin-bottom: 1.286em; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">Use these instructions to build SpiderMonkey from an official source release or from the old CVS repository. To build the latest SpiderMonkey sources from Mercurial, see <a href="#Building_SpiderMonkey_tip" style="text-decoration: none; color: rgb(51, 102, 153) !important; cursor: default;">Building SpiderMonkey </a>above.</p>

<p style="margin-top: 0px; margin-right: 0px; margin-bottom: 1.286em; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;"><a href="/en/SpiderMonkey" style="text-decoration: none; color: rgb(51, 102, 153) !important; cursor: default;" title="en/SpiderMonkey">SpiderMonkey</a> is easy to build from source if you have the usual Mozilla build prerequisites installed. Before you begin, make sure you have right build tools for your computer: <a href="/En/Developer_Guide/Build_Instructions/Linux_Prerequisites" style="text-decoration: none; color: rgb(51, 102, 153) !important; cursor: default;" title="en/Linux_Build_Prerequisites">Linux</a>, <a href="/En/Developer_Guide/Build_Instructions/Windows_Prerequisites" style="text-decoration: none; color: rgb(51, 102, 153) !important; cursor: default;" title="en/Windows_Build_Prerequisites">Windows</a>, <a href="/En/Developer_Guide/Build_Instructions/Mac_OS_X_Prerequisites" style="text-decoration: none; color: rgb(51, 102, 153) !important; cursor: default;" title="en/Mac_OS_X_Build_Prerequisites">Mac</a>, <a href="/En/Developer_Guide/Build_Instructions" style="text-decoration: none; color: rgb(51, 102, 153) !important; cursor: default;" title="en/Build_Documentation">others</a>.</p>

<p style="margin-top: 0px; margin-right: 0px; margin-bottom: 1.286em; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">First, download a SpiderMonkey source distribution, such as <a class="external" href="http://ftp.mozilla.org/pub/mozilla.org/js/js-1.8.0-rc1.tar.gz" style="text-decoration: none; color: rgb(51, 102, 153) !important; cursor: default;">SpiderMonkey 1.8 Release Candidate 1</a>.</p>

<p style="margin-top: 0px; margin-right: 0px; margin-bottom: 1.286em; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">To build, use these commands:</p>

<pre class="eval" style="margin-top: 0px; margin-right: 0px; margin-bottom: 1.286em; margin-left: 0px; padding-top: 15px; padding-right: 15px; padding-bottom: 15px; padding-left: 15px; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: dotted; border-right-style: dotted; border-bottom-style: dotted; border-left-style: dotted; background-clip: initial; background-color: rgb(246, 246, 242); font: normal normal normal 100%/normal 'Courier New', 'Andale Mono', monospace;">tar xvzf js-1.8.0-rc1.tar.gz
cd js/src
make -f Makefile.ref
</pre>

<p style="margin-top: 0px; margin-right: 0px; margin-bottom: 1.286em; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">This builds a debug version of SpiderMonkey. All build files are created in a subdirectory named depending on your system (for example,<code style="font: normal normal normal 100%/normal 'Courier New', 'Andale Mono', monospace; color: inherit; font-weight: inherit;">Linux_All_DBG.OBJ</code> if you are on Linux). To install this build on your system, see <a class="external" href="http://ebixio.com/blog/2010/07/31/how-to-install-libjs-spidermonkey/" style="text-decoration: none; color: rgb(51, 102, 153) !important; cursor: default;" title="http://ebixio.com/blog/2010/07/31/how-to-install-libjs-spidermonkey/">SpiderMonkey installation instructions</a>.</p>

<p style="margin-top: 0px; margin-right: 0px; margin-bottom: 1.286em; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">To build an optimized (non-debug) version of SpiderMonkey:</p>

<pre class="eval" style="margin-top: 0px; margin-right: 0px; margin-bottom: 1.286em; margin-left: 0px; padding-top: 15px; padding-right: 15px; padding-bottom: 15px; padding-left: 15px; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: dotted; border-right-style: dotted; border-bottom-style: dotted; border-left-style: dotted; background-clip: initial; background-color: rgb(246, 246, 242); font: normal normal normal 100%/normal 'Courier New', 'Andale Mono', monospace;">make BUILD_OPT=1 -f Makefile.ref</pre>

<p style="margin-top: 0px; margin-right: 0px; margin-bottom: 1.286em; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px;">To build a <a href="/en/SpiderMonkey/JSAPI_Reference/JS_THREADSAFE" style="text-decoration: none; color: rgb(51, 102, 153) !important; cursor: default;" title="JS_THREADSAFE">thread-safe</a> version of SpiderMonkey:</p>

<pre class="eval" style="margin-top: 0px; margin-right: 0px; margin-bottom: 1.286em; margin-left: 0px; padding-top: 15px; padding-right: 15px; padding-bottom: 15px; padding-left: 15px; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: dotted; border-right-style: dotted; border-bottom-style: dotted; border-left-style: dotted; background-clip: initial; background-color: rgb(246, 246, 242); font: normal normal normal 100%/normal 'Courier New', 'Andale Mono', monospace;">make JS_DIST=/full/path/to/directory/containing/nspr JS_THREADSAFE=1 -f Makefile.ref
</pre>
